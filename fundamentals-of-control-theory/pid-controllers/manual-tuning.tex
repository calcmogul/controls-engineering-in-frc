\section{Manual tuning}

These steps apply to position PID controllers. Velocity PID controllers
typically don't need $K_d$.
\begin{enumerate}
  \item Set $K_p$, $K_i$, and $K_d$ to zero.
  \item Increase $K_p$ until the \gls{output} starts to oscillate around the
    \gls{setpoint}.
  \item Increase $K_d$ as much as possible without introducing jittering in the
    \gls{system response}.
\end{enumerate}

If the \gls{setpoint} follows a trapezoid profile (see section
\ref{sec:1_dof_motion_profiles}), tuning becomes a lot easier. Plot the position
\gls{setpoint}, velocity \gls{setpoint}, measured position, and measured
velocity. The velocity \gls{setpoint} can be obtained via numerical
differentiation of the position \gls{setpoint} (i.e.,
$v_{desired,k} = \frac{r_k - r_{k-1}}{\Delta t}$). Increase $K_p$ until the
position tracks well, then increase $K_d$ until the velocity tracks well.

If the \gls{controller} settles at an \gls{output} above or below the
\gls{setpoint}, one can increase $K_i$ such that the \gls{controller} reaches
the \gls{setpoint} in a reasonable amount of time.
\begin{remark}
  If a \gls{model} is available (not the case here with output-based control),
  prefer a feedforward (section \ref{sec:feedforward}) or an integrator in the
  \gls{plant} (section \ref{sec:integral_control}) instead of an integrator in
  the \gls{controller} (e.g., the I term in PID). Use integrators only to
  compensate for unmodelable dynamics.
\end{remark}

Beware that if $K_i$ is too large, integral windup can occur. Following a large
change in \gls{setpoint}, the integral term can accumulate an error larger than
the maximal \gls{control input}. As a result, the system overshoots and
continues to increase until this accumulated error is unwound.
